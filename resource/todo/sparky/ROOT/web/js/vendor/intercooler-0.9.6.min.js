var Intercooler=Intercooler||function(){function ca(a){0<a.closest(".ic-use-transition").length?(a.data("ic-use-transition",!0),a.removeClass("ic-use-transition")):a.show()}function m(a){return da?"data-"+a:a}function f(a,b){return a.attr(m(b))}function B(a,b,c){a.attr(m(b),c)}function ea(a,b){try{a.prepend(b)}catch(c){g(a,n(c),"ERROR")}if(f(a,"ic-limit-children")){var d=parseInt(f(a,"ic-limit-children"));a.children().length>d&&a.children().slice(d,a.children().length).remove()}}function fa(a,b){try{a.append(b)}catch(c){g(a,n(c),"ERROR")}if(f(a,"ic-limit-children")){var d=parseInt(f(a,"ic-limit-children"));a.children().length>d&&a.children().slice(0,a.children().length-d).remove()}}function g(a,b,c){null==a&&(a=$("body")),a.trigger("log.ic",[b,c,a]),"ERROR"==c&&(window.console&&window.console.log("Intercooler Error : "+b),(a=k($("body"),"ic-post-errors-to"))&&$.post(a,{error:b}))}function u(a){return g(null,"POLL: Parsing interval string "+a,"DEBUG"),"null"==a||"false"==a||""==a?null:a.lastIndexOf("ms")==a.length-2?parseFloat(a.substr(0,a.length-2)):a.lastIndexOf("s")==a.length-1?1e3*parseFloat(a.substr(0,a.length-1)):1e3}function l(a){return"["+m(a)+"]"}function ga(){null==F&&(F=function(){$(l("ic-trigger-on='scrolled-into-view'")).each(function(){var a=$(this),b=$(window).scrollTop(),c=b+$(window).height(),d=$(a).offset().top,a=d+$(a).height();a>=b&&c>=d&&c>=a&&d>=b&&1!=$(this).data("ic-scrolled-into-view-loaded")&&($(this).data("ic-scrolled-into-view-loaded",!0),v($(this)))})},$(window).scroll(F))}function G(){return window.location.pathname+window.location.search+window.location.hash}function x(a){var b=$(a).closest(l("ic-target")),c=f(b,"ic-target");return"this"==c?b:c&&0!=c.indexOf("this.")?0==c.indexOf("closest ")?a.closest(c.substr(8)):0==c.indexOf("find ")?a.find(c.substr(5)):$(c):a}function N(a,b){a.trigger("beforeHeaders.ic",[a,b]),g(a,"response headers: "+b.getAllResponseHeaders(),"DEBUG");var c=null;if(b.getResponseHeader("X-IC-Refresh")){var d=b.getResponseHeader("X-IC-Refresh").split(",");g(a,"X-IC-Refresh: refreshing "+d,"DEBUG"),$.each(d,function(b,c){H(c.replace(/ /g,""),a)})}if(b.getResponseHeader("X-IC-Script")&&(g(a,"X-IC-Script: evaling "+b.getResponseHeader("X-IC-Script"),"DEBUG"),eval(b.getResponseHeader("X-IC-Script"))),b.getResponseHeader("X-IC-Redirect")&&(g(a,"X-IC-Redirect: redirecting to "+b.getResponseHeader("X-IC-Redirect"),"DEBUG"),window.location=b.getResponseHeader("X-IC-Redirect")),"true"==b.getResponseHeader("X-IC-CancelPolling")&&O($(a).closest(l("ic-poll"))),"true"==b.getResponseHeader("X-IC-ResumePolling")&&(d=$(a).closest(l("ic-poll")),B(d,"ic-pause-polling",null),C(d)),b.getResponseHeader("X-IC-SetPollInterval")&&(d=$(a).closest(l("ic-poll")),O(d),B(d,"ic-poll",b.getResponseHeader("X-IC-SetPollInterval")),C(d)),b.getResponseHeader("X-IC-Open")&&(g(a,"X-IC-Open: opening "+b.getResponseHeader("X-IC-Open"),"DEBUG"),window.open(b.getResponseHeader("X-IC-Open"))),d=b.getResponseHeader("X-IC-Trigger"))if(g(a,"X-IC-Trigger: found trigger "+d,"DEBUG"),c=x(a),b.getResponseHeader("X-IC-Trigger-Data")){var e=$.parseJSON(b.getResponseHeader("X-IC-Trigger-Data"));c.trigger(d,e)}else 0<=d.indexOf("{")?$.each($.parseJSON(d),function(a,b){c.trigger(a,b)}):c.trigger(d,[]);return b.getResponseHeader("X-IC-Remove")&&a&&(c=x(a),g(a,"X-IC-Remove header found.","DEBUG"),c.remove()),a.trigger("afterHeaders.ic",[a,b]),!0}function ha(a){a.addClass("disabled"),a.data("ic-request-in-flight",!0)}function P(a,b){0<a.length&&(a.data("ic-use-transition")?(a.data("ic-use-transition",null),a.addClass("ic-use-transition")):a.hide()),b.removeClass("disabled"),b.data("ic-request-in-flight",!1),b.data("ic-next-request")&&(b.data("ic-next-request")(),b.data("ic-next-request",null))}function Q(a,b){if("string"===$.type(a)){var c=/(&|^)_method=[^&]*/,d="&_method="+b;return c.test(a)?a.replace(c,d):a+d}return a.append("_method",b),a}function A(a){return window.eval.call(window,a)}function k(a,b){var c=$(a).closest(l(b));return 0<c.length?f(c,b):null}function n(a){var b=a.toString()+"\n";try{b+=a.stack}catch(c){}return b}function ia(a,b,c,d,e){ha(a),d=Q(d,b);var f=ja(a);0<f.length&&ca(f);var h=I++,i=new Date,j={type:ka?b:"GET"==b?"GET":"POST",url:c,data:d,dataType:"text",headers:{Accept:"text/html-partial, */*; q=0.9","X-IC-Request":!0,"X-HTTP-Method-Override":b},beforeSend:function(e,f){a.trigger("beforeSend.ic",[a,d,f,e,h]),g(a,"before AJAX request "+h+": "+b+" to "+c,"DEBUG");var i=k(a,"ic-on-beforeSend");i&&A("(function (data, settings, xhr) {"+i+"})")(d,f,e)},success:function(b,c,d){a.trigger("success.ic",[a,b,c,d,h]),g(a,"AJAX request "+h+" was successful.","DEBUG");var i=k(a,"ic-on-success");if(!i||0!=A("(function (data, textStatus, xhr) {"+i+"})")(b,c,d)){i=new Date;try{if(N(a,d)){g(a,"Processed headers for request "+h+" in "+(new Date-i)+"ms","DEBUG");var j=new Date;if(d.getResponseHeader("X-IC-PushURL")||"true"==k(a,"ic-push-url"))try{P(f,a);var l=d.getResponseHeader("X-IC-PushURL")||k(a,"ic-src");D.snapshotForHistory(l)}catch(m){g(a,"Error during history snapshot for "+h+": "+n(m),"ERROR")}e(b,c,a,d),g(a,"Process content for request "+h+" in "+(new Date-j)+"ms","DEBUG")}a.trigger("after.success.ic",[a,b,c,d,h])}catch(m){g(a,"Error processing successful request "+h+" : "+n(m),"ERROR")}}},error:function(b,d,e){a.trigger("error.ic",[a,d,e,b]);var f=k(a,"ic-on-error");f&&A("(function (status, str, xhr) {"+f+"})")(d,e,b),g(a,"AJAX request "+h+" to "+c+" experienced an error: "+e,"ERROR")},complete:function(b,c){g(a,"AJAX request "+h+" completed in "+(new Date-i)+"ms","DEBUG"),P(f,a);try{$.contains(document,a[0])?$(a).trigger("complete.ic",[a,d,c,b,h]):$("body").trigger("complete.ic",[a,d,c,b,h])}catch(e){g(a,"Error during complete.ic event for "+h+" : "+n(e),"ERROR")}var j=k(a,"ic-on-complete");j&&A("(function (xhr, status) {"+j+"})")(b,c)}};"string"!=$.type(d)&&(j.dataType=null,j.processData=!1,j.contentType=!1),$(document).trigger("beforeAjaxSend.ic",j),$.ajax(j)}function ja(a){var b;if(f($(a),"ic-indicator"))b=$(f($(a),"ic-indicator")).first();else if(b=$(a).find(".ic-indicator").first(),0==b.length){var c=k(a,"ic-indicator");c?b=$(c).first():$(a).next().is(".ic-indicator")&&(b=$(a).next())}return b}function R(a,b){if(0==$.trim(b).indexOf("{")){var c=$.parseJSON(b);$.each(c,function(b,c){a=r(a,b,c)})}else $(b).each(function(){var b=$(this).serializeArray();$.each(b,function(b,c){a=r(a,c.name,c.value)})});return a}function r(a,b,c){return"string"===$.type(a)?a+"&"+b+"="+encodeURIComponent(c):(a.append(b,c),a)}function ma(a,b,c){var d=x(b),e=null;if(b.is("form")&&"multipart/form-data"==b.attr("enctype")?(e=new FormData(b[0]),e=r(e,"ic-request",!0)):(e="ic-request=true",e="GET"!=a&&0<b.closest("form").length?e+("&"+b.closest("form").serialize()):e+("&"+b.serialize())),a=k(b,"ic-prompt")){if(!(a=prompt(a)))return null;var h=k(b,"ic-prompt-name")||"ic-prompt-value",e=r(e,h,a)}return b.attr("id")&&(e=r(e,"ic-element-id",b.attr("id"))),b.attr("name")&&(e=r(e,"ic-element-name",b.attr("name"))),f(d,"ic-id")&&(e=r(e,"ic-id",f(d,"ic-id"))),d.attr("id")&&(e=r(e,"ic-target-id",d.attr("id"))),c&&c.attr("id")&&(e=r(e,"ic-trigger-id",c.attr("id"))),c&&c.attr("name")&&(e=r(e,"ic-trigger-name",c.attr("name"))),(c=k(b,"ic-include"))&&(e=R(e,c)),$(l("ic-global-include")).each(function(){e=R(e,f($(this),"ic-global-include"))}),e=r(e,"ic-current-url",G()),g(b,"request parameters "+e,"DEBUG"),e}function E(a){var b=x(a);S(b),1!=a.data("elementAdded.ic")&&(a.data("elementAdded.ic",!0),a.trigger("elementAdded.ic"))}function S(a){return f(a,"ic-id")||B(a,"ic-id",I++),f(a,"ic-id")}function z(a){1<a.length?a.each(function(){z($(this))}):(na(a),oa(a),pa(a),qa(a),ra(a),sa(a),ta(a))}function J(a){a.trigger("nodesProcessed.ic"),$.each(T,function(b,c){try{c(a)}catch(d){g(a,n(d),"ERROR")}})}function na(a){$.each(ua,function(b,c){0==$(a).closest(".ic-ignore").length&&($(a).is("["+c+"]")&&U(c,$(a)),$(a).find("["+c+"]").each(function(){0==$(this).closest(".ic-ignore").length&&U(c,$(this))}))})}function oa(a){0==$(a).closest(".ic-ignore").length&&($(a).is(l("ic-src"))&&E($(a)),$(a).find(l("ic-src")).each(function(){0==$(this).closest(".ic-ignore").length&&E($(this))}))}function pa(a){0==$(a).closest(".ic-ignore").length&&($(a).is(l("ic-poll"))&&(E($(a)),C(a)),$(a).find(l("ic-poll")).each(function(){0==$(this).closest(".ic-ignore").length&&(E($(this)),C($(this)))}))}function qa(a){0==$(a).closest(".ic-ignore").length&&(V(a),$(a).find(l("ic-trigger-on")).each(function(){0==$(this).closest(".ic-ignore").length&&V($(this))}))}function ra(a){0==$(a).closest(".ic-ignore").length&&(W(a),$(a).find(l("ic-remove-after")).each(function(){0==$(this).closest(".ic-ignore").length&&W($(this))}))}function sa(a){0==$(a).closest(".ic-ignore").length&&(X(a),$(a).find(l("ic-add-class")).each(function(){0==$(this).closest(".ic-ignore").length&&X($(this))}))}function ta(a){0==$(a).closest(".ic-ignore").length&&(Y(a),$(a).find(l("ic-remove-class")).each(function(){0==$(this).closest(".ic-ignore").length&&Y($(this))}))}function C(a){if(null==a.data("ic-poll-interval-id")&&"true"!=f($(a),"ic-pause-polling")){var b=u(f(a,"ic-poll"));if(null!=b){var c=l("ic-id='"+S(a)+"'"),d=parseInt(f(a,"ic-poll-repeats"))||-1,e=0;g(a,"POLL: Starting poll for element "+c,"DEBUG");var h=setInterval(function(){var b=$(c);a.trigger("onPoll.ic",b),0==b.length||e==d||a.data("ic-poll-interval-id")!=h?(g(a,"POLL: Clearing poll for element "+c,"DEBUG"),clearTimeout(h)):v(b),e++},b);a.data("ic-poll-interval-id",h)}}}function O(a){null!=a.data("ic-poll-interval-id")&&(clearTimeout(a.data("ic-poll-interval-id")),a.data("ic-poll-interval-id",null))}function H(a,b){g(b,"refreshing dependencies for path "+a,"DEBUG"),$(l("ic-src")).each(function(){var c=!1;"GET"==K($(this))&&"ignore"!=f($(this),"ic-deps")&&"undefined"==typeof f($(this),"ic-poll")&&(L(a,f($(this),"ic-src"))?(null==b||$(b)[0]!=$(this)[0])&&(v($(this)),c=!0):(L(a,f($(this),"ic-deps"))||"*"==f($(this),"ic-deps"))&&(null==b||$(b)[0]!=$(this)[0])&&(v($(this)),c=!0)),c&&g($(this),"depends on path "+a+", refreshing...","DEBUG")})}function L(a,b){return!!Z(a,b)}function K(a){return f(a,"ic-verb")?f(a,"ic-verb").toUpperCase():"GET"}function va(a,b){return"default"==a?$(b).is("button")?"click":$(b).is("form")?"submit":$(b).is(":input")?"change":"click":a}function W(a){if(f($(a),"ic-remove-after")){var b=u(f($(a),"ic-remove-after"));setTimeout(function(){a.remove()},b)}}function aa(a,b,c){var d="",e=50;0<a.indexOf(":")?(a=a.split(":"),d=a[0],e=u(a[1])):d=a,setTimeout(function(){b[c](d)},e)}function X(a){if(f($(a),"ic-add-class"))for(var b=f($(a),"ic-add-class").split(","),c=b.length,d=0;c>d;d++)aa($.trim(b[d]),a,"addClass")}function Y(a){if(f($(a),"ic-remove-class"))for(var b=f($(a),"ic-remove-class").split(","),c=b.length,d=0;c>d;d++)aa($.trim(b[d]),a,"removeClass")}function V(a){if(f($(a),"ic-trigger-on"))if("load"==f($(a),"ic-trigger-on"))v(a);else if("scrolled-into-view"==f($(a),"ic-trigger-on"))ga(),setTimeout(function(){$(window).trigger("scroll")},100);else{var b=f($(a),"ic-trigger-on").split(" ");$(a).on(va(b[0],$(a)),function(c){var d=k(a,"ic-on-beforeTrigger");if(d&&0==A("(function (evt, elt) {"+d+"})")(c,$(a)))return g($(a),"ic-trigger cancelled by ic-on-beforeTrigger","DEBUG"),!1;if("changed"==b[1]){var d=$(a).val(),e=$(a).data("ic-previous-val");$(a).data("ic-previous-val",d),d!=e&&v($(a))}else v($(a));return a.is("form")||a.is(":submit")&&1==a.closest("form").length||a.is("a")&&a.is("[href]")&&0!=a.attr("href").indexOf("#")?(c.preventDefault(),!1):!0})}}function U(a,b){a==m("ic-post-to")&&(h(b,"ic-src",f(b,"ic-post-to")),h(b,"ic-verb","POST"),h(b,"ic-trigger-on","default"),h(b,"ic-deps","ignore")),a==m("ic-put-to")&&(h(b,"ic-src",f(b,"ic-put-to")),h(b,"ic-verb","PUT"),h(b,"ic-trigger-on","default"),h(b,"ic-deps","ignore")),a==m("ic-patch-to")&&(h(b,"ic-src",f(b,"ic-patch-to")),h(b,"ic-verb","PATCH"),h(b,"ic-trigger-on","default"),h(b,"ic-deps","ignore")),a==m("ic-get-from")&&(h(b,"ic-src",f(b,"ic-get-from")),h(b,"ic-trigger-on","default"),h(b,"ic-deps","ignore")),a==m("ic-delete-from")&&(h(b,"ic-src",f(b,"ic-delete-from")),h(b,"ic-verb","DELETE"),h(b,"ic-trigger-on","default"),h(b,"ic-deps","ignore")),a==m("ic-action")&&h(b,"ic-trigger-on","default");var c;if(a==m("ic-style-src")){c=f(b,"ic-style-src").split(":");var d=c[0];c=c[1],h(b,"ic-src",c),h(b,"ic-target","this.style."+d)}a==m("ic-attr-src")&&(c=f(b,"ic-attr-src").split(":"),d=c[0],c=c[1],h(b,"ic-src",c),h(b,"ic-target","this."+d)),a==m("ic-prepend-from")&&h(b,"ic-src",f(b,"ic-prepend-from")),a==m("ic-append-from")&&h(b,"ic-src",f(b,"ic-append-from"))}function h(a,b,c){null==f(a,b)&&B(a,b,c)}function wa(a,b){if("false"!=k(a,"ic-scroll-to-target")&&("true"==k(a,"ic-scroll-to-target")||"true"==k(b,"ic-scroll-to-target"))){var c=-50;k(a,"ic-scroll-offset")?c=parseInt(k(a,"ic-scroll-offset")):k(b,"ic-scroll-offset")&&(c=parseInt(k(b,"ic-scroll-offset")));var d=b.offset().top,e=$(window).scrollTop(),f=e+window.innerHeight;(e>d||d>f)&&(c+=d,$("html,body").animate({scrollTop:c},400))}}function xa(a,b){var c=k(a,"ic-transition-duration");if(c||(c=k(b,"ic-transition-duration")))return u(c);var c=0,d=$(b).css("transition-duration");return d&&(c+=u(d)),(d=$(b).css("transition-delay"))&&(c+=u(d)),c}function M(a,b,c){if(a&&""!=a&&" "!=a){g(b,"response content: \n"+a,"DEBUG");var d=x(b),e=ya(a,k(b,"ic-select-from-response")),h=function(){if("true"==k(b,"ic-replace-target")){try{d.replaceWith(e)}catch(a){g(b,n(a),"ERROR")}z(e),J($(d))}else{if(b.is(l("ic-prepend-from")))ea(d,e),z(e);else if(b.is(l("ic-append-from")))fa(d,e),z(e);else{try{d.empty().append(e)}catch(a){g(b,n(a),"ERROR")}$(d).children().each(function(){z($(this))})}J($(d)),1!=c&&wa(b,d)}};0==d.length?g(b,"Invalid target for element: "+f($(b).closest(l("ic-target")),"ic-target"),"ERROR"):(a=xa(b,d),d.addClass("ic-transitioning"),setTimeout(function(){try{h()}catch(a){g(b,"Error during content swaop : "+n(a),"ERROR")}setTimeout(function(){try{d.removeClass("ic-transitioning"),D.updateHistory(),d.trigger("complete_transition.ic",[d])}catch(a){g(b,"Error during transition complete : "+n(a),"ERROR")}},20)},a))}else g(b,"Empty response, nothing to do here.","DEBUG")}function ya(a,b){var c=$.parseHTML(a,null,!0),c=$(c);return b?c.filter(b).add(c.find(b)).contents():c}function za(a){return(a=k(a,"ic-target"))&&0==a.indexOf("this.style.")?a.substr(11):null}function Aa(a){return(a=k(a,"ic-target"))&&0==a.indexOf("this.")?a.substr(5):null}function v(a,b){var c=a;a.is(l("ic-src"))||void 0!=f(a,"ic-action")||(a=a.closest(l("ic-src")));var d=k(a,"ic-confirm");if((!d||confirm(d))&&0<a.length){var e=I++;a.data("ic-event-id",e);var g=function(){if(1==a.data("ic-request-in-flight"))a.data("ic-next-request",g);else if(a.data("ic-event-id")==e){var d=za(a),h=d?null:Aa(a),i=K(a),j=f(a,"ic-src");if(j){var k=b||function(b){d?a.css(d,b):h?a.attr(h,b):(M(b,a),"GET"!=i&&H(f(a,"ic-src"),a))},l=ma(i,a,c);l&&ia(a,i,j,l,k)}(j=f(a,"ic-action"))&&Ba(a,j)}};(d=k(a,"ic-trigger-delay"))?setTimeout(g,u(d)):g()}}function Ba(a,b){var c=x(a),d=b.split(";"),e=[],f=0;$.each(d,function(a,b){var d=$.trim(b),g=d,h=[];0<d.indexOf(":")&&(g=d.substr(0,d.indexOf(":")),h=Ca(d.substr(d.indexOf(":")+1,d.length))),""!=g&&("delay"==g?(null==f&&(f=0),f+=u(h[0]+"")):(null==f&&(f=420),e.push([f,Da(c,g,h)]),f=null))}),f=0,$.each(e,function(a,b){f+=b[0],setTimeout(b[1],f)})}function Ca(a){try{return eval("["+a+"]")}catch(b){return[$.trim(a)]}}function Da(a,b,c){return function(){var d=a[b]||window[b];d?d.apply(a,c):g(a,"Action "+b+" was not found","ERROR")}}function ba(){var a=$("body");z(a),J(a),D.addPopStateHandler(window),location.search&&0<=location.search.indexOf("ic-launch-debugger=true")&&Intercooler.debug()}var da="true"==$('meta[name="intercoolerjs:use-data-prefix"]').attr("content"),ka="true"==$('meta[name="intercoolerjs:use-actual-http-method"]').attr("content"),ua=$.map("ic-get-from ic-post-to ic-put-to ic-patch-to ic-delete-from ic-style-src ic-attr-src ic-prepend-from ic-append-from ic-action".split(" "),function(a){return m(a)}),F=null,I=1,T=[],Z=function(a,b){if(!a||!b)return!1;var c=a.split(/[\?#]/,1)[0].split("/").filter(function(a){return""!=a}),d=b.split(/[\?#]/,1)[0].split("/").filter(function(a){return""!=a});return""==c||""==d?!1:d.slice(0,c.length).join("/")==c.join("/")||c.slice(0,d.length).join("/")==d.join("/")},D=function(a,b,c,d){function e(){for(var b=[],e=0;e<a.length;e++)0==a.key(e).indexOf("ic-hist-elt-")&&b.push(a.key(e));for(e=0;e<b.length;e++)a.removeItem(b[e]);a.removeItem("ic-history-support"),m={slotLimit:c,historyVersion:d,lruList:[]}}function f(b){var c=m.lruList,d=c.indexOf(b),e=k($("body"));return d>=0?(g(e,"URL found in LRU list, moving to end","INFO"),c.splice(d,1),c.push(b)):(g(e,"URL not found in LRU list, adding","INFO"),c.push(b),c.length>m.slotLimit&&(b=c.shift(),g(e,"History overflow, removing local history for "+b,"INFO"),a.removeItem("ic-hist-elt-"+b))),a.setItem("ic-history-support",JSON.stringify(m)),c}function h(b,d,h){b={url:h,id:"ic-hist-elt-"+h,content:b,yOffset:d,timestamp:(new Date).getTime()},f(h),h=JSON.stringify(b);try{a.setItem(b.id,h)}catch(i){try{e(),a.setItem(b.id,h)}catch(j){g(k($("body")),"Unable to save intercooler history with entire history cleared, is something else eating local storage? History Limit:"+c,"ERROR")}}return b}function i(a){if(null==a.onpopstate||1!=a.onpopstate["ic-on-pop-state-handler"]){var b=a.onpopstate;a.onpopstate=function(a){k($("body")).trigger("handle.onpopstate.ic"),j(a)||b&&b(a),k($("body")).trigger("pageLoad.ic")},a.onpopstate["ic-on-pop-state-handler"]=!0}}function j(b){if((b=b.state)&&b["ic-id"]){if(b=JSON.parse(a.getItem(b["ic-id"])))return M(b.content,k($("body")),!0),b.yOffset&&window.scrollTo(0,b.yOffset),!0;$.get(G(),{"ic-restore-history":!0},function(a,b){var c;/<(html|body)/i.test(a)?(c=document.documentElement.cloneNode(),c.innerHTML=a):(c=document.documentElement.cloneNode(!0),c.querySelector("body").innerHTML=a),c=$(c),c=k(c).html(),M(c,k($("body")),!0)})}return!1}function k(a){var b=a.find(l("ic-history-elt"));return 0<b.length?b:a}var m=JSON.parse(a.getItem("ic-history-support")),n=null;return(null==m||m.slotLimit!=c||m.historyVersion!=d||null==m.lruList)&&(g(k($("body")),"Intercooler History configuration changed, clearing history","INFO"),e()),null==m&&(m={slotLimit:c,historyVersion:d,lruList:[]}),{clearHistory:e,updateHistory:function(){if(n){var a=n.newUrl,c=G(),c=h(n.oldHtml,n.yOffset,c);b.replaceState({"ic-id":c.id},"","");var c=k($("body")),d=h(c.html(),window.pageYOffset,a);b.pushState({"ic-id":d.id},"",a),c.trigger("pushUrl.ic",[c,d]),n=null}},addPopStateHandler:i,snapshotForHistory:function(a){var b=k($("body"));b.trigger("beforeHistorySnapshot.ic",[b]),n={newUrl:a,oldHtml:b.html(),yOffset:window.pageYOffset}},_internal:{addPopStateHandler:i,supportData:function(){return m},dumpLocalStorage:function(){var d,b="",c=[];for(d in a)c.push(d);c.sort(),d=0;for(var e in c){var f=2*a[c[e]].length;d+=f,b+=c[e]+"="+(f/1024/1024).toFixed(2)+" MB\n"}return b+"\nTOTAL LOCAL STORAGE: "+(d/1024/1024).toFixed(2)+" MB"},updateLRUList:f}}}(localStorage,window.history,20,.1);return $.ajaxTransport("text",function(a,b){if("#"==b.url[0]){var c=m("ic-local-"),d=$(b.url),e=[],f=200,g="OK";d.each(function(a,b){$.each(b.attributes,function(a,b){if(b.name.substr(0,c.length)==c){var d=b.name.substring(c.length);"status"==d?(d=b.value.match(/(\d+)\s?(.*)/),null!=d?(f=d[1],g=d[2]):(f="500",g="Attribute Error")):e.push(d+": "+b.value)}})});var h=0<d.length?d.html():"";return{send:function(a,b){b(f,g,{html:h},e.join("\n"))},abort:function(){}}}return null}),$(function(){ba()}),{refresh:function(a){return"string"==typeof a||a instanceof String?H(a):v(a),Intercooler},history:D,triggerRequest:v,processNodes:z,closestAttrValue:k,verbFor:K,isDependent:L,getTarget:x,processHeaders:N,setIsDependentFunction:function(a){Z=a},ready:function(a){T.push(a)},debug:function(){var a=k("body","ic-debugger-url")||"https://intercoolerreleases-leaddynocom.netdna-ssl.com/intercooler-debugger.js";$.getScript(a).fail(function(a,b,c){g($("body"),n(c),"ERROR")})},_internal:{init:ba,replaceOrAddMethod:Q}}}();